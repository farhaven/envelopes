<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="/static/pure/pure-min.css">
		<link rel="stylesheet" href="/static/pure/grids-responsive-min.css">
		<link rel="stylesheet" href="/static/style.css">
		<title>ðŸ“© Envelopes</title>
	</head>
	<body>
		<div class="e-container">
			<div>
			Total Delta: <span class="{{ .TotalDelta.Cls }}">{{ prettyDisplay .TotalDelta.Val }}</span>,
			Total Balance: <span>{{ prettyDisplay .TotalBalance }}</span>
			</div>
			<table class="pure-table" id="envelopes">
				<thead>
					<tr>
						<td>Name</td>
						<td>Balance</td>
						<td>Target</td>
						<td>Delta</td>
						<td>Delete</td>
					</tr>
				</thead>
				<tbody>
				{{ range .Envelopes }}
				{{ $delta := delta .Balance .Target }}
				<a name="e-{{ .Id }}"/>
				<tr>
					<td><a href="/details?id={{ .Id }}">{{ .Name }}</a></td>
					<form class="pure-form" action="/update" method="post">
						<input type="hidden" name="env-name" value="{{ .Name }}">
						<td><input type="number" step="any" min="0" name="env-balance" value="{{ prettyDisplay .Balance }}"></td>
						<td>{{ prettyDisplay .Target }}</td>
						<td><span class="{{index $delta 0}}">{{index $delta 1}}</td>
					</form>
					<td><a class="pure-button button-danger" href="/delete?id={{ .Id }}">X</a></td>
				</tr>
				{{ end }}
				</tbody>
			</table>
		</div>
		<div class="e-container">
			<form class="pure-form" action="/update" method="post">
				<fieldset>
					<input type="text" size="13" name="env-name" placeholder="Name" autofocus>
					<input type="number" min="0" step="any" name="env-balance" placeholder="Balance">
					<input type="number" min="0" step="any" name="env-target" placeholder="Target">
					<button type="submit" class="pure-button pure-button-primary">Add new envelope</button>
				</fieldset>
			</form>
		</div>
	</body>
</html>
